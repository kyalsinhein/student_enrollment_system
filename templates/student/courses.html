{% extends "/student/layout.html" %} {% block content %}
<link rel="stylesheet" href="/static/css/student/courses.css" />

<center>
  <div class="container mt-4">
    <h1 class="coursetitle mb-4">Our Courses</h1>

    <form
      method="GET"
      action="{{ url_for('view_courses') }}"
      class="search-form mb-4"
    >
      <div class="input-group">
        <input
          type="text"
          name="search"
          class="form-control"
          placeholder="Search for a course..."
          value="{{ request.args.get('search', '') }}"
        />
        <button class="btn btn-primary" type="submit">Search</button>
      </div>
    </form>

    <div id="courses-list" class="row">
      {% if courses %} {% for course in courses %}
      <div class="col-md-4 mb-4 course-item">
        <div class="card">
          <img
            src="{{ url_for('static', filename='images/courses/' + course[2]) }}"
            class="card-img-top course-img"
            alt="Course Image"
          />

          <div class="card-body">
            <h5 class="card-title">{{ course[1] }}</h5>
            <p class="card-text">{{ course[3] }}</p>
            <a
              href="{{ url_for('course_detail', course_id=course[0]) }}"
              class="btn btn-primary"
              >View Detail</a
            >
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <p>No courses available.</p>
      {% endif %}
    </div>

    <nav aria-label="Page navigation">
      <ul class="pagination" id="pagination-controls">
        <li class="page-item" id="previous-page">
          <a class="page-link" href="javascript:void(0)">Previous</a>
        </li>
        <li class="page-item" id="next-page">
          <a class="page-link" href="javascript:void(0)">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</center>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const coursesPerPage = 6;
    const courses = Array.from(document.querySelectorAll(".course-item"));
    const totalCourses = courses.length;
    const totalPages = Math.ceil(totalCourses / coursesPerPage);
    let currentPage = 1;

    function showPage(page) {
      const start = (page - 1) * coursesPerPage;
      const end = start + coursesPerPage;

      courses.forEach((course, index) => {
        if (index >= start && index < end) {
          course.style.display = "block";
        } else {
          course.style.display = "none";
        }
      });
    }

    function updatePaginationControls() {
      document
        .getElementById("previous-page")
        .classList.toggle("disabled", currentPage === 1);
      document
        .getElementById("next-page")
        .classList.toggle("disabled", currentPage === totalPages);
    }

    document
      .getElementById("previous-page")
      .addEventListener("click", function () {
        if (currentPage > 1) {
          currentPage--;
          showPage(currentPage);
          updatePaginationControls();
        }
      });

    document.getElementById("next-page").addEventListener("click", function () {
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
        updatePaginationControls();
      }
    });

    showPage(currentPage);
    updatePaginationControls();
  });
</script>

{% endblock %}
